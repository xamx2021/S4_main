[{"module_name":"System Setup","sb":{"domain":null,"_events":{"MISO_getAdminGUIupdate":[null,null,null],"on_log_test_BTN568":[null,null],"on_log_test_BTN367":[null,null]},"_eventsCount":33,"_maxListeners":0,"ackRx":{},"SBCONF":{"loaded":false,"serverremotedataserverip":"0.0.0.0","maxCUsers":10,"multiple_sns":true,"serverremotedataInport":60},"wsock_array":[],"all_infrastructure_IDs":{}},"html":"\r\n<table style=\"table-layout:fixed;\">\t\t\t\r\n\t\t\t\r\n\t\t\t<tr><td colspan=\"2\"  >\t\t\t\r\n\t\t\t\t\t\t<textarea rows=\"20\" cols=\"100\" id=\"Sys_log568\"  style=\" background: rgba(150, 150, 150, 0.5) \"> \t\t</textarea> \r\n\t\t\t\t\t\t<script>\r\n\t\t\t\t\r\n\t\t\t\t\t\t\t\tfunction showMiniLogTable (tt)\r\n\t\t\t\t\t\t\t\t{\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tdocument.getElementById('Sys_log568').value = ''   ;\r\n\t\t\t\t\t\t\t\t\tfor(var i in tt)document.getElementById('Sys_log568').value += tt[i].dtime +  ' '  + tt[i].data  + '\\r\\n'; \r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t</script>\r\n\t\t\t<!--\t\t\t \r\n\r\n\t\t\t\r\n\t\t\t</td></tr>\r\n\t\t\t\t\t<tr><td>\r\n\t\t\t\t\t<label>Keep data on the system:</label></td><td>\t\t\r\n\t\t\t\t\t<select id=\"keepDataDays\" onchange=\"MISO_cmd3(id, value , ui_button(id));\">\r\n\t\t\t\t\t<option value=\"1\">1 day</option>\r\n\t\t\t\t\t<option value=\"2\">2 days</option>\r\n\t\t\t\t\t<option value=\"3\">3 days</option>\r\n\t\t\t\t\t<option value=\"4\">4 days</option>\r\n\t\t\t\t\t<option value=\"5\">5 days</option>\r\n\t\t\t\t\t<option value=\"6\">6 days</option>\t\t\t\t\r\n\t\t\t\t\t<option value=\"10\">10 days</option>\r\n\t\t\t\t\t<option value=\"7\">1 week</option>\r\n\t\t\t\t\t<option value=\"30\">1 month</option>\r\n\t\t\t\t\t<option value=\"360\">1 year</option>\r\n\t\t\t\t\t</select>\r\n\t\t\t</td></tr>\r\n\t\t-->\r\n\t\t<!--\r\n\t\t<tr><td>\r\n\t\t\t\t\t<label data-hint=\"Save system log to a file.\">Export log:</label></td><td>\r\n\t\t\t\t\t<input  id=\"get_log_request\" type=\"button\" value=\"Export log\" onchange=\" \tMISO_cmd3('get_log_request', {} , ui_button(id));\">\r\n\t\t\t</td></tr>\r\n\t\t\t<script>\t\t\r\n\t\t\tfunction downLog(log)\r\n\t\t\t\t{\r\n\t\t\t\t\tvar txt = '';\r\n\t\t\t\t\tfor(var i in log)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\tvar EPC = log[i].epc;\r\n\t\t\t\t\t\tif ( EPCs[EPC] && EPCs[EPC].itemName ) var epc_edit = EPCs[EPC].itemName;\t\t\t\telse  var epc_edit = EPC;\t\t\t\t\t\r\n\t\t\t\t\t\ttxt+=log[i].dtime + ';' + log[i].action + ';' + epc_edit + ';' + log[i].ch + ';' + log[i].data + ';\\n';\t\t\t\t\t\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\tdownload('log.txt', txt );\r\n\t\t\t\t}\r\n\t\t\t\r\n\t\t\t//================DOWNLOAD FILE VIA WEBSOCKET:===============\r\n\t\t\tfunction download(filename, text)\r\n\t\t\t\t{  \t\tvar element = document.createElement('a');  \r\n\t\t\t\t\t\telement.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(text));element.setAttribute('download', filename);\r\n\t\t\t\t\t\telement.style.display = 'none';  document.body.appendChild(element);  element.click();  document.body.removeChild(element);\t\r\n\t\t\t\t}\t\t\r\n\t\t\t\t\r\n\t\t\tdocument.addEventListener(\"MOSI_file_upload\", function(e) {  download(e.detail.MOSI_file_upload.fname, e.detail.MOSI_file_upload.data);});\r\n\t\t\t</script>\t\t\t \r\n\t\t\t-->\t\t \r\n\r\n\t\t\t<!--\r\n\t\t\t<tr><td>\r\n\t\t\t\t\t<label data-hint=\"Test system log, add a new line .\">Test log:</label></td><td>\t\t\t\r\n\t\t\t\t\t<button class=\"s_ctrl_btn_c\"  id=\"test_log568\" onclick= \" MISO_cmd3('on_log_test_BTN568', {value:' Hello world, it\\'s a small test'},   ui_button(id));    \"> Test </button>\r\n\t\t\t</td></tr>\r\n\t\t\t-->\r\n\t\t\t\t\t\r\n\r\n\r\n\r\n\r\n\t\t\t\t\t\r\n\r\n\t\t\t<tr><td>\r\n\t\t\t\t\t<label data-hint=\"Delete all data in the system log.\">Erase log:</label></td><td>\t\t\t\t\t\r\n\t\t\t\t\t<button \r\n\t\t\t\t\t\tclass=\"s_ctrl_btn_c\"  \r\n\t\t\t\t\t\tid=\"erase_log_request\"\r\n\t\t\t\t\t\t onclick= \" modal_confirm('Delete the log?', function(r)\r\n\t\t\t\t\t\t \t{\t\r\n\t\t\t\t\t\t\t\t if(r) MISO_cmd3('on_log_delete_BTN568',  {},   ui_button(id));\r\n\t\t\t\t\t\t\t})  \"> Erace </button>\t\t\t\t\t\r\n\t\t\t</td></tr>\r\n\r\n\t\t\t<tr><td>\r\n\t\t\t\t\t<label data-hint=\"\">Clear local storage:</label></td><td>\r\n\t\t\t\t\t<button \r\n\t\t\t\t\t\tclass=\"s_ctrl_btn_c\"  \r\n\t\t\t\t\t\tid = 'btn_clear_locStr_173' \r\n\t\t\t\t\t\tonclick=\"modal_confirm('Empty local storage?', function(r)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t if(r) localStorage.clear();  \r\n\t\t\t\t\t\t });\"> Clear</button>\t\t\t\t\t\r\n\t\t\t</td></tr>\t\t\t\r\n\t\t\t\r\n\t\t\t<tr><td>\r\n\t\t\t\t\t<label data-hint=\"\">Get stdio log:</label></td><td>\r\n\t\t\t\t\t<button \r\n\t\t\t\t\t\tclass=\"s_ctrl_btn_c\"  \r\n\t\t\t\t\t\tid = 'LOG_std_get' \r\n\t\t\t\t\t\tonclick=\" console.log(id); MISO_cmd3('on_stdio_log_BTN568', {},  function(id,data)\r\n\t\t\t\t\t\t\t{\t\t\r\n\t\t\t\t\t\t\t\tif( data.msg === undefined || data.msg.length == 0) data.msg = 'No data';\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tdocument.getElementById('Sys_log568').value =data.msg;\r\n\t\t\t\t\t\t\t\tui_button(id,data);\r\n\t\t\t\t\t\t\t}.bind(0, id)  );  \">Get stdio log</button>\t\t\t\t\t\r\n\t\t\t</td></tr>\r\n\t\t\t\r\n\t\t\t<tr><td>\r\n\t\t\t\t\t<label data-hint=\"\">Get IDs in the infrastructure:</label></td><td>\r\n\t\t\t\t\t<button \r\n\t\t\t\t\t\tclass=\"s_ctrl_btn_c\"  \r\n\t\t\t\t\t\tid = 'ID_dev_get' \r\n\t\t\t\t\t\tonclick=\"  MISO_cmd3('on_infrastructureIDs_BTN568', 'get',  function(id,data)\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tif( data.msg === undefined || data.msg.length == 0) data.msg = 'No data';\r\n\t\t\t\t\t\t\t\tdocument.getElementById('Sys_log568').value = data.msg;\r\n\t\t\t\t\t\t\t\tui_button(id, data);\r\n\t\t\t\t\t\t\t}.bind(0,id)   ); \">Get infrastructure IDs</button>\r\n\t\t\t\t\t<button \r\n\t\t\t\t\t\tclass=\"s_ctrl_btn_c\"  \r\n\t\t\t\t\t\tid = 'ID_dev_get' \r\n\t\t\t\t\t\tonclick=\"  MISO_cmd3('on_infrastructureIDs_BTN568', 'clear',  function(id,data)\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tif( data.msg === undefined || data.msg.length == 0) data.msg = 'No data';\r\n\t\t\t\t\t\t\t\tdocument.getElementById('Sys_log568').value = data.msg;\r\n\t\t\t\t\t\t\t\tui_button(id, data);\r\n\t\t\t\t\t\t\t}.bind(0,id)   ); \">Clear infrastructure IDs</button>\t\t\t\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\r\n\r\n\t\t\t</td></tr>\r\n\r\n\r\n\r\n\r\n\r\n\r\n\t\t\t\r\n\t\t\t<!--\r\n\t\t\t<tr><td>\r\n\t\t\t\t\t<label data-hint=\"Safely turn the system off.\">System shutdown:</label></td><td>\t\t\t\r\n\t\t\t\t\t<button class=\"s_ctrl_btn_c\"  id=\"b02568\"  onclick=\"if( confirm('Shut down?') )MISO_cmd3('dev_sdown568',  {},   ui_button(id));\" > Shutdown </button>\r\n\t\t\t</td></tr>\t\t\t\r\n\t\t\t-->\r\n\r\n\t\t\t<tr><td>\r\n\t\t\t\t\t<label>CPU temperature, °C:</label></td><td>\r\n\t\t\t\t\t<div> <label  id=\"cpuTemp\"> n/a </label> &nbsp; <font color=\"red\"><label id =\"cpuTempOver\"  ></label></font></div> \r\n\t\t\t</td></tr>\t\t\t\t\r\n\t\t\t\r\n\t\t\t<tr><td>\r\n\t\t\t\t\t<label>CPU Frequency, Mhz:</label></td><td>\r\n\t\t\t\t\t<div> <label  id=\"cpuFreq\"> n/a </label> </div> \r\n\t\t\t</td></tr>\t\r\n\t\t\t\r\n\t\t\t<tr><td>\r\n\t\t\t\t\t<label>CPU 5 minute average load, %:</label></td><td>\r\n\t\t\t\t\t<div> <label  id=\"cpuLoadMin\"> n/a </label> </div> \r\n\t\t\t</td></tr>\r\n\t\t\t\r\n\t\t\t<tr><td>\r\n\t\t\t\t\t<label>CPU voltage, V:</label></td><td>\r\n\t\t\t\t\t<div> <label  id=\"cpuVoltage\"> n/a </label> &nbsp; <font color=\"red\"><label id =\"boardUnderpowered\"  ></label></font></div> \r\n\t\t\t</td></tr>\t\r\n \r\n\t\t\t<tr><td>\r\n\t\t\t\t\t<label>Available system memory:</label></td><td>\r\n\t\t\t\t\t<div> <label  id=\"systemFreeMem\"> n/a </label> </div> \r\n\t\t\t</td></tr>\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t<tr><td>\r\n\t\t\t\t\t<label>Total system memory:</label></td><td>\r\n\t\t\t\t\t<div> <label  id=\"systemTotalMem\"> n/a </label> </div> \r\n\t\t\t</td></tr>\r\n\t\t\t\r\n\t\t\t<tr><td>\r\n\t\t\t\t\t<label>System uptime:</label></td><td>\r\n\t\t\t\t\t<div> <label  id=\"systemUptime\"> n/a </label> </div> \r\n\t\t\t</td></tr>\t\t\r\n\r\n\t\t\t<tr><td>\r\n\t\t\t\t\t<!-----[ Theme selector ]----------------------------------->\r\n\t\t\t\t\t<!-- <script src=\"/theme_css_loader.js\"></script> -->\r\n\t\t\t\t\t<label>Theme:</label></td><td>\r\n                    <select id=\"user_theme_box\" onchange=\" css_from_path_and_save_new( this );\">\t\t\t\t\t\t\r\n\t\t\t\t\t\t<option value=\"white_1\">white/green</option>\r\n                        <option value=\"white\">white(windows10)</option>\r\n                        <option value=\"black\">black</option>                      \r\n                       <!-- <option value=\"green\">le-frog</option>\t-->\r\n                    </select>\r\n                    <script>\r\n                        $(document).on('____on_ws_connect', function (o, data) { user_theme_box.selectedIndex = userTheme_sn; });\r\n                    </script>\r\n\t\t\t</td></tr>\t\r\n\r\n\t\t\r\n\t\t\r\n\t</table>\r\n\t\t\r\n\r\n ","remoteConnected":false,"mod_rnd":568,"pluginEnabled":true},{"module_name":"Controls","sb":{"domain":null,"_events":{"MISO_getAdminGUIupdate":[null,null,null],"on_log_test_BTN568":[null,null],"on_log_test_BTN367":[null,null]},"_eventsCount":33,"_maxListeners":0,"ackRx":{},"SBCONF":{"loaded":false,"serverremotedataserverip":"0.0.0.0","maxCUsers":10,"multiple_sns":true,"serverremotedataInport":60},"wsock_array":[],"all_infrastructure_IDs":{}},"html":"\n\n\n\t<table cellspacing=\"1\" > \t\t<tr><td>\t\t\t\t\t\t\t\t\t\t \t\t\t\t\t\t\t\t\t<button onclick= \"MISO_cmd3( 'on_single_btn_push756', '0',  ui_button(id));\" id=\"__button4_0756\"> dnsmasq  restart </button>\t\t\t\t\t\t\t\t\t\t<label id = \"runstatus_756_0\">   </label>\t\t\t\t\t\t\t\t</td></tr><tr><td>\t\t\t\t\t\t\t\t\t\t \t\t\t\t\t\t\t\t\t<button onclick= \"MISO_cmd3( 'on_single_btn_push756', '1',  ui_button(id));\" id=\"__button4_1756\"> ifconfig </button>\t\t\t\t\t\t\t\t\t\t<label id = \"runstatus_756_1\">   </label>\t\t\t\t\t\t\t\t</td></tr><tr><td>\t\t\t\t\t\t\t\t\t\t \t\t\t\t\t\t\t\t\t<button onclick= \"MISO_cmd3( 'on_single_btn_push756', '2',  ui_button(id));\" id=\"__button4_2756\">  Remount root as RO </button>\t\t\t\t\t\t\t\t\t\t<label id = \"runstatus_756_2\">   </label>\t\t\t\t\t\t\t\t</td></tr><tr><td>\t\t\t\t\t\t\t\t\t\t \t\t\t\t\t\t\t\t\t<button onclick= \"MISO_cmd3( 'on_single_btn_push756', '3',  ui_button(id));\" id=\"__button4_3756\">  Remount root as RW </button>\t\t\t\t\t\t\t\t\t\t<label id = \"runstatus_756_3\">   </label>\t\t\t\t\t\t\t\t</td></tr><tr><td>\t\t\t\t\t\t\t\t\t\t \t\t\t\t\t\t\t\t\t<button onclick= \"MISO_cmd3( 'on_single_btn_push756', '4',  ui_button(id));\" id=\"__button4_4756\"> Scan WLAN IP range </button>\t\t\t\t\t\t\t\t\t\t<label id = \"runstatus_756_4\">   </label>\t\t\t\t\t\t\t\t</td></tr><tr><td>\t\t\t\t\t\t\t\t\t\t \t\t\t\t\t\t\t\t\t<button onclick= \"MISO_cmd3( 'on_single_btn_push756', '5',  ui_button(id));\" id=\"__button4_5756\"> Core restart </button>\t\t\t\t\t\t\t\t\t\t<label id = \"runstatus_756_5\">   </label>\t\t\t\t\t\t\t\t</td></tr><tr><td>\t\t\t\t\t\t\t\t\t\t \t\t\t\t\t\t\t\t\t<button onclick= \"MISO_cmd3( 'on_single_btn_push756', '6',  ui_button(id));\" id=\"__button4_6756\">   uname -a </button>\t\t\t\t\t\t\t\t\t\t<label id = \"runstatus_756_6\">   </label>\t\t\t\t\t\t\t\t</td></tr><tr><td>\t\t\t\t\t\t\t\t\t\t \t\t\t\t\t\t\t\t\t<button onclick= \"MISO_cmd3( 'on_single_btn_push756', '7',  ui_button(id));\" id=\"__button4_7756\"> tail /var/log/ESP_4_ESPserver.log.txt  </button>\t\t\t\t\t\t\t\t\t\t<label id = \"runstatus_756_7\">   </label>\t\t\t\t\t\t\t\t</td></tr><tr><td>\t\t\t\t\t\t\t\t\t\t \t\t\t\t\t\t\t\t\t<button onclick= \"MISO_cmd3( 'on_single_btn_push756', '8',  ui_button(id));\" id=\"__button4_8756\"> openVPN restart </button>\t\t\t\t\t\t\t\t\t\t<label id = \"runstatus_756_8\">   </label>\t\t\t\t\t\t\t\t</td></tr><tr><td>\t\t\t\t\t\t\t\t\t\t \t\t\t\t\t\t\t\t\t<button onclick= \"MISO_cmd3( 'on_single_btn_push756', '9',  ui_button(id));\" id=\"__button4_9756\"> WIFI - Besside log </button>\t\t\t\t\t\t\t\t\t\t<label id = \"runstatus_756_9\">   </label>\t\t\t\t\t\t\t\t</td></tr><tr><td>\t\t\t\t\t\t\t\t\t\t \t\t\t\t\t\t\t\t\t<button onclick= \"MISO_cmd3( 'on_single_btn_push756', '10',  ui_button(id));\" id=\"__button4_10756\"> WIFI - Besside start </button>\t\t\t\t\t\t\t\t\t\t<label id = \"runstatus_756_10\">   </label>\t\t\t\t\t\t\t\t</td></tr><tr><td>\t\t\t\t\t\t\t\t\t\t \t\t\t\t\t\t\t\t\t<button onclick= \"MISO_cmd3( 'on_single_btn_push756', '11',  ui_button(id));\" id=\"__button4_11756\"> WIFI - Besside stop </button>\t\t\t\t\t\t\t\t\t\t<label id = \"runstatus_756_11\">   </label>\t\t\t\t\t\t\t\t</td></tr>\t\t</table>\t \n\n\t<script>\t\n\t\t\t\t\tdocument.addEventListener(\"show_terminal\", function(o) \n\t\t\t\t\t{\t\t\t\t\t \n\t\t\t\t\t\tBootstrapDialog.alert( o.detail.show_terminal.stdout );\n\t\t\t\t\t\tconsole.log(o.detail.show_terminal.stdout);\n\t\t\t\t\t});\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t\tdocument.addEventListener(\"show_stream_terminal\", function(o) \n\t\t\t\t\t{\n\t\t\t\t\t\tvar o = o.detail.show_stream_terminal;\t\n\t\t\t\t\t\t document.getElementById(\"myStreamTerminal\").value = o.stdout.data.toString('utf8');\n\t\t\t\t\t\tconsole.log(o.stdout);\n\t\t\t\t\t});\t\t\t\t\t\t\t\n\t</script>\n\n\n \n<textarea id=\"myStreamTerminal\" rows=\"4\" cols=\"50\">\t</textarea> \n \n \n \n ","remoteConnected":false,"mod_rnd":756,"pluginEnabled":true},{"module_name":"About","sb":{"domain":null,"_events":{"MISO_getAdminGUIupdate":[null,null,null],"on_log_test_BTN568":[null,null],"on_log_test_BTN367":[null,null]},"_eventsCount":33,"_maxListeners":0,"ackRx":{},"SBCONF":{"loaded":false,"serverremotedataserverip":"0.0.0.0","maxCUsers":10,"multiple_sns":true,"serverremotedataInport":60},"wsock_array":[],"all_infrastructure_IDs":{}},"html":"\n  \n\t\n\t- Can work with MQTT or direct socket connection\n\t\n\t<br>\n\tTODO priority:\n\t<br>\n\t <br> code barometer library  for i2c device\n\t implement motion event detection & handling\n\t\n\t<br>\n\tadd icons to the menu, add favicon and logo\n\t<br>\n\tTODO\n\t<br>user  interfae for plugin configuration  ( plugin list should be moved to DB )\n\n\t<br>MQTT command sender. send JSON to a topic in the network\n\t<br>MQTT other device integration\n\t<br> test log-in\n\t<br> make distributable image\n\t<br> GIT, Store and etc registring\n\t<br> UI design improvement\n\t<br> documentation\n\t<br> \t\n\t<br>\n\t<br> что там с кнопками и ивентами? Какой потенциал у второго пина при старте? Наверное можно реализовать дребезгоустойчивый метод для случая с реле с MCU\n\t<br>\n\t барометр показывает цену на дрова \n\t <br>\n\n\tminimal setup: air multimeter + oneswitch\t| \n\tall other modules:  PWM DC dimmer, 4 ralayswitch, humidifier, IR controller*, RGB strip |  \n\tSystem modules:  system setup, plugin setup, automation, system controls, radio player with LED blinker\t| \n\tSpecial modules: RFID, SDR, Generator,  strange crystal sensor\n\n\t\n <br>\t\t\t\n \t\t  //Outdoor module: Participate in weather and ecological researches by sending  T,RH,P,Dust and Geiger data to network data collectors:\n\t\t\t//{ plugin_file: './S3_core/inc__net_data_prvv.js', name: 'research integration' },\n <br> \n\t\n\n \n ","remoteConnected":false,"mod_rnd":894,"pluginEnabled":true},{"module_name":"Dashboard","sb":{"domain":null,"_events":{"MISO_getAdminGUIupdate":[null,null,null],"on_log_test_BTN568":[null,null],"on_log_test_BTN367":[null,null]},"_eventsCount":33,"_maxListeners":0,"ackRx":{},"SBCONF":{"loaded":false,"serverremotedataserverip":"0.0.0.0","maxCUsers":10,"multiple_sns":true,"serverremotedataInport":60},"wsock_array":[],"all_infrastructure_IDs":{}},"html":"\n  \n\t\n\t\t\t%*dashboard*%\n\n \n ","remoteConnected":false,"mod_rnd":475,"pluginEnabled":true},{"module_name":"System Setup","sb":{"domain":null,"_events":{"MISO_getAdminGUIupdate":[null,null,null],"on_log_test_BTN568":[null,null],"on_log_test_BTN367":[null,null]},"_eventsCount":33,"_maxListeners":0,"ackRx":{},"SBCONF":{"loaded":false,"serverremotedataserverip":"0.0.0.0","maxCUsers":10,"multiple_sns":true,"serverremotedataInport":60},"wsock_array":[],"all_infrastructure_IDs":{}},"html":"\r\n<table style=\"table-layout:fixed;\">\t\t\t\r\n\t\t\t\r\n\t\t\t<tr><td colspan=\"2\"  >\t\t\t\r\n\t\t\t\t\t\t<textarea rows=\"20\" cols=\"100\" id=\"Sys_log367\"  style=\" background: rgba(150, 150, 150, 0.5) \"> \t\t</textarea> \r\n\t\t\t\t\t\t<script>\r\n\t\t\t\t\r\n\t\t\t\t\t\t\t\tfunction showMiniLogTable (tt)\r\n\t\t\t\t\t\t\t\t{\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tdocument.getElementById('Sys_log367').value = ''   ;\r\n\t\t\t\t\t\t\t\t\tfor(var i in tt)document.getElementById('Sys_log367').value += tt[i].dtime +  ' '  + tt[i].data  + '\\r\\n'; \r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t</script>\r\n\t\t\t<!--\t\t\t \r\n\r\n\t\t\t\r\n\t\t\t</td></tr>\r\n\t\t\t\t\t<tr><td>\r\n\t\t\t\t\t<label>Keep data on the system:</label></td><td>\t\t\r\n\t\t\t\t\t<select id=\"keepDataDays\" onchange=\"MISO_cmd3(id, value , ui_button(id));\">\r\n\t\t\t\t\t<option value=\"1\">1 day</option>\r\n\t\t\t\t\t<option value=\"2\">2 days</option>\r\n\t\t\t\t\t<option value=\"3\">3 days</option>\r\n\t\t\t\t\t<option value=\"4\">4 days</option>\r\n\t\t\t\t\t<option value=\"5\">5 days</option>\r\n\t\t\t\t\t<option value=\"6\">6 days</option>\t\t\t\t\r\n\t\t\t\t\t<option value=\"10\">10 days</option>\r\n\t\t\t\t\t<option value=\"7\">1 week</option>\r\n\t\t\t\t\t<option value=\"30\">1 month</option>\r\n\t\t\t\t\t<option value=\"360\">1 year</option>\r\n\t\t\t\t\t</select>\r\n\t\t\t</td></tr>\r\n\t\t-->\r\n\t\t<!--\r\n\t\t<tr><td>\r\n\t\t\t\t\t<label data-hint=\"Save system log to a file.\">Export log:</label></td><td>\r\n\t\t\t\t\t<input  id=\"get_log_request\" type=\"button\" value=\"Export log\" onchange=\" \tMISO_cmd3('get_log_request', {} , ui_button(id));\">\r\n\t\t\t</td></tr>\r\n\t\t\t<script>\t\t\r\n\t\t\tfunction downLog(log)\r\n\t\t\t\t{\r\n\t\t\t\t\tvar txt = '';\r\n\t\t\t\t\tfor(var i in log)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\tvar EPC = log[i].epc;\r\n\t\t\t\t\t\tif ( EPCs[EPC] && EPCs[EPC].itemName ) var epc_edit = EPCs[EPC].itemName;\t\t\t\telse  var epc_edit = EPC;\t\t\t\t\t\r\n\t\t\t\t\t\ttxt+=log[i].dtime + ';' + log[i].action + ';' + epc_edit + ';' + log[i].ch + ';' + log[i].data + ';\\n';\t\t\t\t\t\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\tdownload('log.txt', txt );\r\n\t\t\t\t}\r\n\t\t\t\r\n\t\t\t//================DOWNLOAD FILE VIA WEBSOCKET:===============\r\n\t\t\tfunction download(filename, text)\r\n\t\t\t\t{  \t\tvar element = document.createElement('a');  \r\n\t\t\t\t\t\telement.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(text));element.setAttribute('download', filename);\r\n\t\t\t\t\t\telement.style.display = 'none';  document.body.appendChild(element);  element.click();  document.body.removeChild(element);\t\r\n\t\t\t\t}\t\t\r\n\t\t\t\t\r\n\t\t\tdocument.addEventListener(\"MOSI_file_upload\", function(e) {  download(e.detail.MOSI_file_upload.fname, e.detail.MOSI_file_upload.data);});\r\n\t\t\t</script>\t\t\t \r\n\t\t\t-->\t\t \r\n\r\n\t\t\t<!--\r\n\t\t\t<tr><td>\r\n\t\t\t\t\t<label data-hint=\"Test system log, add a new line .\">Test log:</label></td><td>\t\t\t\r\n\t\t\t\t\t<button class=\"s_ctrl_btn_c\"  id=\"test_log367\" onclick= \" MISO_cmd3('on_log_test_BTN367', {value:' Hello world, it\\'s a small test'},   ui_button(id));    \"> Test </button>\r\n\t\t\t</td></tr>\r\n\t\t\t-->\r\n\t\t\t\t\t\r\n\r\n\r\n\r\n\r\n\t\t\t\t\t\r\n\r\n\t\t\t<tr><td>\r\n\t\t\t\t\t<label data-hint=\"Delete all data in the system log.\">Erase log:</label></td><td>\t\t\t\t\t\r\n\t\t\t\t\t<button \r\n\t\t\t\t\t\tclass=\"s_ctrl_btn_c\"  \r\n\t\t\t\t\t\tid=\"erase_log_request\"\r\n\t\t\t\t\t\t onclick= \" modal_confirm('Delete the log?', function(r)\r\n\t\t\t\t\t\t \t{\t\r\n\t\t\t\t\t\t\t\t if(r) MISO_cmd3('on_log_delete_BTN367',  {},   ui_button(id));\r\n\t\t\t\t\t\t\t})  \"> Erace </button>\t\t\t\t\t\r\n\t\t\t</td></tr>\r\n\r\n\t\t\t<tr><td>\r\n\t\t\t\t\t<label data-hint=\"\">Clear local storage:</label></td><td>\r\n\t\t\t\t\t<button \r\n\t\t\t\t\t\tclass=\"s_ctrl_btn_c\"  \r\n\t\t\t\t\t\tid = 'btn_clear_locStr_173' \r\n\t\t\t\t\t\tonclick=\"modal_confirm('Empty local storage?', function(r)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t if(r) localStorage.clear();  \r\n\t\t\t\t\t\t });\"> Clear</button>\t\t\t\t\t\r\n\t\t\t</td></tr>\t\t\t\r\n\t\t\t\r\n\t\t\t<tr><td>\r\n\t\t\t\t\t<label data-hint=\"\">Get stdio log:</label></td><td>\r\n\t\t\t\t\t<button \r\n\t\t\t\t\t\tclass=\"s_ctrl_btn_c\"  \r\n\t\t\t\t\t\tid = 'LOG_std_get' \r\n\t\t\t\t\t\tonclick=\" console.log(id); MISO_cmd3('on_stdio_log_BTN367', {},  function(id,data)\r\n\t\t\t\t\t\t\t{\t\t\r\n\t\t\t\t\t\t\t\tif( data.msg === undefined || data.msg.length == 0) data.msg = 'No data';\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tdocument.getElementById('Sys_log367').value =data.msg;\r\n\t\t\t\t\t\t\t\tui_button(id,data);\r\n\t\t\t\t\t\t\t}.bind(0, id)  );  \">Get stdio log</button>\t\t\t\t\t\r\n\t\t\t</td></tr>\r\n\t\t\t\r\n\t\t\t<tr><td>\r\n\t\t\t\t\t<label data-hint=\"\">Get IDs in the infrastructure:</label></td><td>\r\n\t\t\t\t\t<button \r\n\t\t\t\t\t\tclass=\"s_ctrl_btn_c\"  \r\n\t\t\t\t\t\tid = 'ID_dev_get' \r\n\t\t\t\t\t\tonclick=\"  MISO_cmd3('on_infrastructureIDs_BTN367', 'get',  function(id,data)\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tif( data.msg === undefined || data.msg.length == 0) data.msg = 'No data';\r\n\t\t\t\t\t\t\t\tdocument.getElementById('Sys_log367').value = data.msg;\r\n\t\t\t\t\t\t\t\tui_button(id, data);\r\n\t\t\t\t\t\t\t}.bind(0,id)   ); \">Get infrastructure IDs</button>\r\n\t\t\t\t\t<button \r\n\t\t\t\t\t\tclass=\"s_ctrl_btn_c\"  \r\n\t\t\t\t\t\tid = 'ID_dev_get' \r\n\t\t\t\t\t\tonclick=\"  MISO_cmd3('on_infrastructureIDs_BTN367', 'clear',  function(id,data)\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tif( data.msg === undefined || data.msg.length == 0) data.msg = 'No data';\r\n\t\t\t\t\t\t\t\tdocument.getElementById('Sys_log367').value = data.msg;\r\n\t\t\t\t\t\t\t\tui_button(id, data);\r\n\t\t\t\t\t\t\t}.bind(0,id)   ); \">Clear infrastructure IDs</button>\t\t\t\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\r\n\r\n\t\t\t</td></tr>\r\n\r\n\r\n\r\n\r\n\r\n\r\n\t\t\t\r\n\t\t\t<!--\r\n\t\t\t<tr><td>\r\n\t\t\t\t\t<label data-hint=\"Safely turn the system off.\">System shutdown:</label></td><td>\t\t\t\r\n\t\t\t\t\t<button class=\"s_ctrl_btn_c\"  id=\"b02367\"  onclick=\"if( confirm('Shut down?') )MISO_cmd3('dev_sdown367',  {},   ui_button(id));\" > Shutdown </button>\r\n\t\t\t</td></tr>\t\t\t\r\n\t\t\t-->\r\n\r\n\t\t\t<tr><td>\r\n\t\t\t\t\t<label>CPU temperature, °C:</label></td><td>\r\n\t\t\t\t\t<div> <label  id=\"cpuTemp\"> n/a </label> &nbsp; <font color=\"red\"><label id =\"cpuTempOver\"  ></label></font></div> \r\n\t\t\t</td></tr>\t\t\t\t\r\n\t\t\t\r\n\t\t\t<tr><td>\r\n\t\t\t\t\t<label>CPU Frequency, Mhz:</label></td><td>\r\n\t\t\t\t\t<div> <label  id=\"cpuFreq\"> n/a </label> </div> \r\n\t\t\t</td></tr>\t\r\n\t\t\t\r\n\t\t\t<tr><td>\r\n\t\t\t\t\t<label>CPU 5 minute average load, %:</label></td><td>\r\n\t\t\t\t\t<div> <label  id=\"cpuLoadMin\"> n/a </label> </div> \r\n\t\t\t</td></tr>\r\n\t\t\t\r\n\t\t\t<tr><td>\r\n\t\t\t\t\t<label>CPU voltage, V:</label></td><td>\r\n\t\t\t\t\t<div> <label  id=\"cpuVoltage\"> n/a </label> &nbsp; <font color=\"red\"><label id =\"boardUnderpowered\"  ></label></font></div> \r\n\t\t\t</td></tr>\t\r\n \r\n\t\t\t<tr><td>\r\n\t\t\t\t\t<label>Available system memory:</label></td><td>\r\n\t\t\t\t\t<div> <label  id=\"systemFreeMem\"> n/a </label> </div> \r\n\t\t\t</td></tr>\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t<tr><td>\r\n\t\t\t\t\t<label>Total system memory:</label></td><td>\r\n\t\t\t\t\t<div> <label  id=\"systemTotalMem\"> n/a </label> </div> \r\n\t\t\t</td></tr>\r\n\t\t\t\r\n\t\t\t<tr><td>\r\n\t\t\t\t\t<label>System uptime:</label></td><td>\r\n\t\t\t\t\t<div> <label  id=\"systemUptime\"> n/a </label> </div> \r\n\t\t\t</td></tr>\t\t\r\n\r\n\t\t\t<tr><td>\r\n\t\t\t\t\t<!-----[ Theme selector ]----------------------------------->\r\n\t\t\t\t\t<!-- <script src=\"/theme_css_loader.js\"></script> -->\r\n\t\t\t\t\t<label>Theme:</label></td><td>\r\n                    <select id=\"user_theme_box\" onchange=\" css_from_path_and_save_new( this );\">\t\t\t\t\t\t\r\n\t\t\t\t\t\t<option value=\"white_1\">white/green</option>\r\n                        <option value=\"white\">white(windows10)</option>\r\n                        <option value=\"black\">black</option>                      \r\n                       <!-- <option value=\"green\">le-frog</option>\t-->\r\n                    </select>\r\n                    <script>\r\n                        $(document).on('____on_ws_connect', function (o, data) { user_theme_box.selectedIndex = userTheme_sn; });\r\n                    </script>\r\n\t\t\t</td></tr>\t\r\n\r\n\t\t\r\n\t\t\r\n\t</table>\r\n\t\t\r\n\r\n ","remoteConnected":false,"mod_rnd":367,"pluginEnabled":true},{"module_name":"Air multimeter","local_id":"c59e99","sb":{"domain":null,"_events":{"MISO_getAdminGUIupdate":[null,null,null],"on_log_test_BTN568":[null,null],"on_log_test_BTN367":[null,null]},"_eventsCount":33,"_maxListeners":0,"ackRx":{},"SBCONF":{"loaded":false,"serverremotedataserverip":"0.0.0.0","maxCUsers":10,"multiple_sns":true,"serverremotedataInport":60},"wsock_array":[],"all_infrastructure_IDs":{}},"html":"\r\n<script src='/lib/spectrum.js'></script>\r\n<link rel='stylesheet' href='/lib/spectrum.css' />\r\n\r\n\t\t\t\t<script src=\"/lib/chartjs/moment.min.js\"></script>  \r\n\t\t\t\t<script src=\"/lib/chartjs/chart.js@2.9.1\"></script>\r\n\t\t\t\t<script src=\"/lib/chartjs/hammerjs@2.0.8\"></script>\r\n\t\t\t\t<script src=\"/lib/chartjs/chartjs-plugin-zoom.min.js\"></script>\r\n\r\n\r\n\t<table cellspacing=\"1\"   width=\"100%\"> \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t<tr  width=\"60%\">\r\n\t\t\t\t<td >\r\n\t\t\t\t\t\t<canvas id=\"chartContainer2312\"  style=\"  margin-top: 0px; \"   ></canvas>\r\n\t\t\t\t</td>\t\t\t\t\r\n\t\t\t\t<td width=\"30%\">\r\n\t\t\t\t\t<fieldset><legend>[ Legend ]</legend>\r\n\t\t\t\t\t\t<br>\r\n\t\t\t\t\t\t<div id = \"activeLegendCJSPLOTdata2_312\"> </div>\r\n\t\t\t\t\t\t<br>\r\n\t\t\t\t\t\t<button onclick=\"       chart_2312.resetZoom();\t\t\">Reset Zoom</button>\t\t\t\t\t\t \r\n\t\t\t\t\t\t<br>\t\t\t\t\t\t\r\n\t\t\t\t\t</fieldset>\r\n\t\t\t\t\t<br>\r\n\t\t\t\t\t<fieldset><legend>[ Data processing ]</legend>\r\n\t\t\t\t\t\t<br>\r\n\t\t\t\t\t\t\t<!--<button class=\"s_ctrl_btn_c\"  id=\"btn_0004p312\" onclick= \"MISO_cmd3('on_data_reset312', {}, ui_button(id)); \">Reset</button>\t-->\r\n\t\t\t\t\t\t\t<button \r\n\t\t\t\t\t\t\t\tclass=\"s_ctrl_btn_c\"  \r\n\t\t\t\t\t\t\t\tid = \"btn_0004p312\" \r\n\t\t\t\t\t\t\t\tonclick=\"modal_confirm('Drop dataset?', function(r)\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tif(r) MISO_cmd3('on_data_reset312', {}, ui_button(id));  \r\n\t\t\t\t\t\t\t\t});\"> Erase </button>\r\n\r\n\r\n\t\t\t\t\t\t<button class=\"s_ctrl_btn_c\"  id=\"btn_00ir7p312\" onclick= \"MISO_cmd3('get_data312', {}, ui_button(id));    \">Request</button>\r\n\t\t\t\t\t\t<button class=\"s_ctrl_btn_c\"  id=\"btn_dataExport312\" onclick= \"BtnDataExport312()  \">Export</button>\r\n\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t<button class=\"s_ctrl_btn_c\"  id=\"btn_dataSave312\" onclick= \"MISO_cmd3('on_save_data312', {}, ui_button(id));  \">Save</button>\r\n\t\t\t\t\t\t<button class=\"s_ctrl_btn_c\"  id=\"btn_dataLoad312\" onclick= \"MISO_cmd3('on_load_data312', {}, ui_button(id));   \">Load</button>\t\t\r\n\t\t\t\t\t\t<button class=\"s_ctrl_btn_c\"  id=\"btn_00ir74p312\" onclick= \"\r\n\r\n\t\t\t\t\t\t\t\tvar text = 'AAA bbb  Ccc';\r\n\t\t\t\t\t\t\t\tMISO_cmd3('on_event_add312', {text:text}, ui_button(id));    \r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\">Add event</button>\t \r\n\r\n\t\t\t\t\t\t<br>\r\n\t\t\t\t\t\t\t<button class=\"s_ctrl_btn_c\"  id=\"btn_refiter312\" onclick= \"MISO_cmd3('on_on_refilter_all_data312', {'R':p_R312.value ,  'Q':  p_Q312.value }, ui_button(id));   \">Re-filter</button>\r\n\t\t\t\t\t\t\t<label>R:</label>\t\t<input \ttype=\"number\" id=\"p_R312\" min=\"0.001\" step=\"0.001\" max=\"1\" value=\"0.01\">\r\n\t\t\t\t\t\t\t<label>Q:</label>\t\t<input \ttype=\"number\" id=\"p_Q312\" min=\"0.001\" step=\"0.001\" max=\"1\" value=\"0.3\">\t\t\t\t\t\t\r\n\t\t\t\t\t\t<br>\r\n\r\n\t\t\t\t\t\t\t<button class=\"s_ctrl_btn_c\"  id=\"btn_dataAppx312\" onclick= \"MISO_cmd3('on_apx_data312', {'R':p_R312.value ,  'Q':  p_Q312.value,  'Wmax': \tp_Wmax312.value, 'Wmin':  p_Wmin312.value, 'Wconst':  p_Wconst312.value,  'Ftype':    p_Ftype312.value\t}, ui_button(id));   \">Approximate</button>\r\n\t\t\t\t\t\t\t<label>Progression:</label>\t\t<select id=\"p_Ftype312\">\t \t<option value=\"0\">Constant</option> \t\t<option value=\"1\">Linear</option> \t \t\t<option value=\"2\">Quadratic</option> \t\t<option value=\"3\">Cubic</option>\t\t\t\t</select>\r\n\t\t\t\t\t\t\t<br>\r\n\t\t\t\t\t\t\t<label>Wmax:</label>\t\t<input \ttype=\"number\" id=\"p_Wmax312\" min=\"5\" step=\"1\" max=\"500\" value=\"80\">\r\n\t\t\t\t\t\t\t<label>Wmin:</label>\t\t<input \ttype=\"number\" id=\"p_Wmin312\" min=\"5\" step=\"1\" max=\"500\" value=\"5\">\r\n\t\t\t\t\t\t\t<label>Wconst:</label>\t\t<input \ttype=\"number\" id=\"p_Wconst312\" min=\"5\" step=\"1\" max=\"100\" value=\"10\">\r\n\t\t\t\t\t\t<br>\r\n\t\t\t\t\t</fieldset>\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t<!--\r\n\t\t\t\t\t<br><label data-hint=\"\">server poll Update rate, ms: </label>\t\t\t\t\r\n\t\t\t\t\t\t<input \r\n\t\t\t\t\t\t\ttype=\"range\" id=\"update_rate_val312\" min=\"500\" max=\"5000\"\r\n\t\t\t\t\t\t\tonchange=\"compUdp_onchange(id, { cb_value: document.getElementById( 'update_methodswitch___dx007___' ).checked });\"\r\n\t\t\t\t\t\t\tparameter=\"rangeValue\"\r\n\t\t\t\t\t\t\toninput=\"compUdp_oninput(id);\"\r\n\t\t\t\t\t\t\tindicator=\"update_rate_indicator_val312\" \r\n\t\t\t\t\t\t\ttitle=\"Controls data auto-refresh interval\"\r\n\t\t\t\t\t\t\tcommand=\"update_rate_val312\"\r\n\t\t\t\t\t\t><label id=\"update_rate_indicator_val312\">   </label> \r\n\t\t\t\t\t<br>\r\n\t\t\t\t\t<label style=\"color:#000000\">use server-pol:</label>\r\n\t\t\t\t\t <input type=\"checkbox\"  id=\"update_methodswitch___dx007___\"\r\n\t\t\t\t\t\tonchange=\" \r\n\t\t\t\t\t\t\tcb_save('update_methodswitch___dx007___'); \r\n\t\t\t\t\t\t\tMISO_cmd3('on_update_pol_met312', \r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tcb_value: document.getElementById( 'update_methodswitch___dx007___' ).checked\r\n\t\t\t\t\t\t\t\t}, ui_button(id));\r\n\t\t\t\t\t\t\t\"> device  (checked) / server (unchecked)\r\n\t\t\t\t-->\t\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t\t<br>\r\n\t\t\t\t\t<fieldset><legend>[ Device control ]</legend>\r\n\t\t\t\t\t\t\t<br>\r\n\t\t\t\t\t\t\t<label id=\"DeviceStatus_val312\"></label>\r\n\t\t\t\t\t\t\t<br>\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t<label style=\"color:#000000\">Enable/disable device:</label>\r\n\t\t\t\t\t\t\t<input type=\"checkbox\"  id=\"ckbox03_device_enabled312\"\r\n\t\t\t\t\t\t\t\tonchange=\" \t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tMISO_cmd3('on_device_ctrl312', \t{\tdeviceEnabled: document.getElementById(id).checked\t}, ui_button(id));\r\n\t\t\t\t\t\t\t\t\t\">\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t<br>\r\n\r\n\t\t\t\t\t\t\t<label style=\"color:#000000\">Data update interval, ms:</label>\r\n\t\t\t\t\t\t\t<input \r\n\t\t\t\t\t\t\t\ttype=\"number\"  min=\"500\" max=\"60000\"     id=\"text01data_update_interval_TB312\" \r\n\t\t\t\t\t\t\t\tonchange=\" \t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tMISO_cmd3('on_device_ctrl312', \t{\tdata_update_interval: value\t}, ui_button(id));\r\n\t\t\t\t\t\t\t\t\t\">\r\n\t\t\t\t\t\t\t<br>\t\r\n\r\n\t\t\t\t\t\t\t<label style=\"color:#000000\">High CO2 alarm threshold, ppm:</label>\r\n\t\t\t\t\t\t\t<input type=\"number\"  min=\"400\" max=\"2000\"      id=\"text02CO2_Thold312\" \r\n\t\t\t\t\t\t\t\tonchange=\" \t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tMISO_cmd3('on_device_ctrl312', \t{\t\t\tCO2LED_Thold: value\t\t\t\t\t}, ui_button(id));\r\n\t\t\t\t\t\t\t\t\t\"> \t\r\n\r\n\t\t\t\t\t<!--  <br>\r\n\t\t\t\t\t\t\t<label style=\"color:#000000\">CO2 Thold:</label>\r\n\t\t\t\t\t\t\t<input type=\"text\"  id=\"text0002CO2_Thold312\" \r\n\t\t\t\t\t\t\t\tonchange=\" \t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tMISO_cmd3('on_device_ctrl312', \r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\tCO2LED_Thold: value\r\n\t\t\t\t\t\t\t\t\t\t}, ui_button(id));\r\n\t\t\t\t\t\t\t\t\t\">\r\n\t\t\t\t\t-->\r\n\t\t\t\t\t\t\t<br>\r\n\t\t\t\t\t\t\t\t<label style=\"color:#000000\">High CO2 alarm, LED color</label>:\t\t\r\n\t\t\t\t\t\t\t\t<input type='text' id=\"flat312\" />\r\n\t\t\t\t\t\t\t\t<script>\r\n\t\t\t\t\t\t\t\t\t\tfunction ledSetColor312( color )\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\tvar lastTime_colorChanged = 0;\r\n\t\t\t\t\t\t\t\t\t\t\t$(\"#flat312\").spectrum({color: color, clickoutFiresChange: true});\r\n\t\t\t\t\t\t\t\t\t\t\t$(\"#flat312\").on('move.spectrum', function(e, tinycolor)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar nowTime = performance.now();\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar timeDiff = nowTime - lastTime_colorChanged;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif(timeDiff< 40) return;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlastTime_colorChanged = nowTime;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar color = {\tr: tinycolor.toRgb().r,  g:tinycolor.toRgb().g,  b:tinycolor.toRgb().b\t\t};\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tMISO_cmd3('on_indicator_led_set_RGB312', color, \t function(){});\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t// Set color on page reload.\r\n\t\t\t\t\t\t\t\t\t\t\tdocument.addEventListener(\"RGB_Set_color_select_box312\", function(o) \r\n\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t//var obj = o.detail.RGB_Set_color_select_box312;\r\n\t\t\t\t\t\t\t\t\t\t\t\tvar hexColor = \"#\" + Xdec2hex(o.detail.R) + Xdec2hex(o.detail.G) + Xdec2hex(o.detail.B);\r\n\t\t\t\t\t\t\t\t\t\t\t\t$(\"#flat312\").spectrum({\t\tcolor: hexColor,\tshowInput: true \t});\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tfunction Xdec2hex(decimal) { var chars = 2;   return (decimal + Math.pow(16, chars)).toString(16).slice(-chars).toUpperCase();\t}\t\r\n\t\t\t\t\t\t\t\t</script>\r\n\t\t\t\t\t\t\t\t<br>\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t</fieldset>\t\r\n\r\n\r\n\r\n\t\t\t\t</td></tr>\r\n\r\n\r\n\r\n</table>\r\n<br>\r\n\r\n\r\n\r\n\r\n\r\n<script>\r\n{\r\n\r\n\t\t\t\tvar bar_ctx = document.getElementById('chartContainer2312').getContext('2d');\r\n\t\t\t\tvar purple_orange_gradient = bar_ctx.createLinearGradient(0, 0, 0, 600);\r\n\t\t\t\tpurple_orange_gradient.addColorStop(0, 'orange');\r\n\t\t\t\tpurple_orange_gradient.addColorStop(1, 'purple');\r\n\r\n\r\n\t\t\t\t// ONE: Init\t\r\n\t\t\t\t// Active legend configuration:\r\n\t\t\t\tCJSPLOTdata2_312 = [];\r\n\t\t\t\tCJSPLOTdata2_312.push( {  type: \"scatter\", data:[],\t  label: 'Motion event', \t\t\t\t vunit: '', \t\t\t\t\t\t\t\tborderColor:'#ff0000',   \t   \t\t inpDataKey: 'PIR', \t\tpointRadius :5,\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\tCJSPLOTdata2_312.push( {  type: \"line\", \t\tdata:[],\tlabel: 'Temperature', \t\t\t \t   vunit: '°C', \ttoFixed:2,\t\t\tborderColor:'#ce0d0d',  \t  \t\t inpDataKey: 't', \t\t\t\t\tbackgroundColor: \"rgba(255,153,0,0.6)\",\t fill: true, \t\tyAxisID : \"y-axis-2\",\t\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\tCJSPLOTdata2_312.push( {  type: \"line\", \t\tdata:[],\tlabel: 'Humidity', \t\t\t \t\t\t  vunit: '%RH', toFixed:2,\t\t\tborderColor:'#3225de',       \t\t  inpDataKey: 'h', \t\t\t\t\tbackgroundColor: \"rgba(153,100,255,0.6)\", fill: true, \t yAxisID : \"y-axis-2\",\t\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\tCJSPLOTdata2_312.push( {  type: \"line\", \t\tdata:[], \tlabel: 'Dew point',\t\t\t\t   \t\t vunit: '°C', \t\ttoFixed:2,\t\t\tborderColor:'#8314b9',  \t\t\t inpDataKey: 'dewp', \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t yAxisID : \"y-axis-2\",\t\t \t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\tCJSPLOTdata2_312.push( {  type: \"line\", \t\tdata:[],\tlabel: 'Pressure',   \t\t\t\t\t  vunit: 'kPa', \ttoFixed:2,\t  \t\t\tborderColor:'#466b53',  \t  \t\t inpDataKey: 'p', \t\t\t\tyAxisID : \"y-axis-3\",\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t \t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\tCJSPLOTdata2_312.push( {  type: \"line\", \t\tdata:[], \tlabel: 'CO2, ppm', \t\t\t\t\t    vunit: 'ppm', \t\t\t\t\t \t\t\tborderColor:'#446b3a',  \t\t\t inpDataKey: 'co2', \t\t\t\t \ttension: 0.1,\tbackgroundColor: purple_orange_gradient,\t fill: false, \tyAxisID : \"y-axis-3\",\t\t\t\t});\r\n\t\t\t\t//CJSPLOTdata_312.push( {  type: \"line\", \t data:[], \t label: 'CO', \t\t\t\t\t\t\t\t  vunit: 'ppm', \t\t\t\t\t\t\t\tborderColor:'#ea4630',  \t \t\t inpDataKey: 'gas_1', \t\t\t\t \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t//CJSPLOTdata_312.push( {  type: \"line\", \t data:[], \t label: 'Geiger counter, Ppm', \t\tvunit: 'PPM', \t\t\t\t\t\t\t\tborderColor:'#bb2528',  \t\t\t inpDataKey: 'geigerCount', \t\ttension: 0.1,\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t });\r\n\t\t\t\tCJSPLOTdata2_312.push( {  type: \"line\", \t\tdata:[], \tlabel: 'Dust particles', \t\t\t\t vunit: 'μg/m³', toFixed:1,\t\t\t\tborderColor:'#405050',  \t \t\t inpDataKey: 'dust_all_pm', \t\ttension: 0.1,\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\tCJSPLOTdata2_312.push( {  type: \"line\", \t\tdata:[], \tlabel: 'Dust particles PM1', \t\t vunit: 'μg/m³',  \t\t\t\t\t\t\tborderColor:'#a0a00a',  \t \t\t inpDataKey: 'dust_pm_10_std', \t \ttension: 0.1,\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\tCJSPLOTdata2_312.push( {  type: \"line\", \t\tdata:[], \tlabel: 'Dust particles PM2.5', \t\tvunit: 'μg/m³', \t\t\t\t\t\t\tborderColor:'#00c009',  \t\t\t inpDataKey: 'dust_pm_25_std', \t\ttension: 0.1,\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t \t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\tCJSPLOTdata2_312.push( {  type: \"line\", \t\tdata:[], \tlabel: 'Dust particles PM10', \t\tvunit: 'μg/m³', \t\t\t\t\t\t\tborderColor:'#00a0aa', \t\t\t \t\tinpDataKey: 'dust_pm_100_std', \t tension: 0.1,\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\tCJSPLOTdata2_312.push( {  type: \"line\", \t\tdata:[], \tlabel: 'Dust particles P3', \t\t\tvunit: 'particles/100ml', \t\t\t\tborderColor:'#5812aa',  \t\t\t inpDataKey: 'p3', \t\t\t\t\t\t \t\ttension: 0.1,\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t//CJSPLOTdata2_312.push( {  type: \"line\", \t\tdata:[], \tlabel: 'Dust particles P3a', \t\t  vunit: 'particles/100ml', \t\t\t\tborderColor:'#F812Fa',  \t\t \tinpDataKey: 'u3', \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t });\r\n\r\n\r\n\t\t\t\tCJSPLOTdata2_312.push( {  type: \"line\", \t\tdata:[], \tlabel: 'Data approximating progression', \t\t\t\t\t\t\t\tvunit: '', \tborderColor:'#F812Fa',  \t inpDataKey: 'FProg', \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t });\r\n \r\n\t\t\r\n\r\n\t\t\t\tfor(var i in CJSPLOTdata2_312) \r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif(!CJSPLOTdata2_312[i].pointRadius)CJSPLOTdata2_312[i].pointRadius = 0;\r\n\t\t\t\t\t}\r\n\r\n\r\n\r\n\t\t\t\t// Active legend generator:\r\n\t\t\t\tvar activeLegend = activeLegendCJSPLOTdata2_312;\r\n\t\t\t\tfor( var i in CJSPLOTdata2_312)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\tCJSPLOTdata2_312[ i ].hidden = true;\t\t\t\t\t\t\t\t\t\t// The default state \r\n\t\t\t\t\t\t\tvar checkbox = document.createElement(\"input\");\r\n\t\t\t\t\t\t\t\t\tcheckbox.type = 'checkbox';\t \r\n\t\t\t\t\t\t\t\t\tcheckbox.id = 'cbxAAAAA'+i;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t//checkbox.id = 'cbx_312'+i;\t\t\t\t// Better module-dependent ID\r\n\t\t\t\t\t\t\t\t\t//Load cb state from local storage:\r\n\t\t\t\t\t\t\t\t\tcheckbox.checked = (localStorage.getItem(checkbox.id) === 'true');\r\n\t\t\t\t\t\t\t\t\tCJSPLOTdata2_312[ i ].hidden = !checkbox.checked;\r\n\t\t\t\t\t\t\t\t\tcheckbox.onchange = function( i,c,cid )\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t// Save state:\r\n\t\t\t\t\t\t\t\t\t\t\tlocalStorage.setItem(cid, c.checked);\r\n\t\t\t\t\t\t\t\t\t\t\tCJSPLOTdata2_312[ i ].hidden =  !c.checked;\r\n\t\t\t\t\t\t\t\t\t\t\tchart_2312.update();\r\n\t\t\t\t\t\t\t\t\t\t}.bind( 0, i, checkbox, checkbox.id );\r\n\t\t\t\t\t\t\t\t\tactiveLegend.appendChild(checkbox);               \t\t\t\t\t\t\t\t// Append <button> to <body> \t\t\t\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tvar label1 = document.createElement('label');\r\n\t\t\t\t\t\t\t\t\tlabel1.textContent =  CJSPLOTdata2_312[i].label ;\r\n\t\t\t\t\t\t\t\t\tlabel1.style.color =  CJSPLOTdata2_312[i].borderColor;\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tactiveLegend.appendChild(label1);\r\n\r\n\t\t\t\t\t\t\t// Add the value indicator only if 'unit' is set:\r\n\t\t\t\t\t\t\tif( CJSPLOTdata2_312[i].vunit )\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tvar label2 = document.createElement('label');\r\n\t\t\t\t\t\t\t\t\t\t\t//label2.id = CJSPLOTdata2_312[i].currentValueIndicatorElement\t = 'cvl_312'+i;\r\n\t\t\t\t\t\t\t\t\t\t\tCJSPLOTdata2_312[i].currentValueIndicatorElement = label2;\r\n\t\t\t\t\t\t\t\t\t\t\tlabel2.id = 'cvl_312'+i;\r\n\t\t\t\t\t\t\t\t\t\t\tlabel2.style[\"margin-left\"] =  '1.5em'\r\n\t\t\t\t\t\t\t\t\t\t\tlabel2.style[\"margin-right\"] =  '0.5em'\r\n\t\t\t\t\t\t\t\t\t\t\tlabel2.textContent = '  ';\t\r\n\t\t\t\t\t\t\t\t\t\t\tactiveLegend.appendChild(label2);\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\tactiveLegend.appendChild(  document.createTextNode(\t CJSPLOTdata2_312[i].vunit ) );\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tactiveLegend.appendChild( document.createElement('br') );\t\t\t\t// End of line\r\n\t\t\t\t\t}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\t\t\t\t\t// Chart.js initialization:\r\n\t\t\t\t\tvar chart_2312 = new window.Chart(document.getElementById('chartContainer2312').getContext('2d'),\r\n\t\t\t\t\t\t{\t\t\t\t\t\t\t \r\n\t\t\t\t\t\t\tdata: \t{\t\t\t\t\t  datasets: CJSPLOTdata2_312\t\t},\r\n\t\t\t\t\t\t\toptions: \r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\telements: {        line: {     fill: false,     tension: 0 ,    }    \t\t},\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tanimation: {       duration: 0    \t\t\t\t\t\t\t\t\t\t\t\t},\t\t\t\t\t\t\t\t\t \r\n\t\t\t\t\t\t\t\t\ttooltips: {\t\t\t mode: 'index',\t\t\t\tintersect: false,\t\t  },\r\n\t\t\t\t\t\t\t\t\thover: {\t\t\t mode: 'nearest',\t\tintersect: true\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\tlegend: {\t\t\tdisplay: false, \t\tposition: \"right\"\t\t \t  },\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\ttitle: \t {\t\t\t\tdisplay: false,\t\ttext: 'Air parameters'\t\t  },\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tresponsive: true,\r\n\t\t\t\t\t\t\t\t\t//maintainAspectRatio: false,\r\n\t\t\t\t\t\t\t\t\tscales: {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\txAxes: [{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype: 'time',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t//time: {\t\t\t\t\t\tparser:  'MM/DD/YYYY HH:mm',\t\t\ttooltipFormat: 'll HH:mm'\t\t\t\t\t\t\t\t\t\t},\t// round: 'day'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttime: {\t\t\t\t\t\tparser: 'MM/DD/YYYY HH:mm',\t\ttooltipFormat: 'DD/H:m',\t\tstepSize: 2, \tminUnit:'minute'   },\t// round: 'day'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tposition: 'bottom',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tgridLines: \t {\t\t\tzeroLineColor: 'rgba(10,55,0,1)'\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tscaleLabel: {\t\t \tdisplay: false,\t\t\t\t\tlabelString: 'Time'\t },\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tticks: {\t\t\t reverse: false, \t\t   \tmaxRotation: 40,\t\t\t\tautoSkipPadding:6, padding:12\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}],\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tyAxes: [\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t//\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t//\t\tid:\"y-axis-1\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t//\t\tposition: 'right',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t//\t\tgridLines: {\t\t\tzeroLineColor: 'rgba(10,55,0,1)'\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t//\t\ttype: 'linear',\t\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t//\t\tscaleLabel: {\t\t\tdisplay: false,\tlabelString: 'y axis 1'\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t//\t\tticks: {\t  reverse: false,\tbeginAtZero:false\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t//\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid:\"y-axis-2\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tposition:'left',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tgridLines: {\t\t\tzeroLineColor: 'rgba(200,55,0,1)'\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype: 'linear',\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tscaleLabel: {\t\t\tdisplay: false,\t\t\t\tlabelString: 'y axis 2'\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tticks: {\treverse: false,\t\tbeginAtZero:false\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid:\"y-axis-3\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tposition:'left',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tgridLines: {\t\t\tzeroLineColor: 'rgba(0,0,0,1)'\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype: 'linear',\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tscaleLabel: {\t\t\tdisplay: false,\t\t\t\tlabelString: 'y axis 2'\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tticks: {\treverse: false,\t\tbeginAtZero:false\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t//plugins: {\t\t\t\tzoom: {\tpan: {\t\t\t  enabled: true,\t mode: 'xy'\t\t\t},\t\tzoom: {\t\t\tenabled: true,\t\tmode: 'xy'\t\t}\t}\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\tplugins: {\t\t\t\tzoom: {\tpan: {\t\t\t  enabled: true,\t mode: 'xy'\t\t\t},\t\tzoom: {\t\t\tenabled: true,\t\tmode: 'x'\t\t}\t}\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\t\t\r\n\t\t\t\r\n\r\n\r\n\t\t\t\t// TWO:  Load\r\n\t\t\t\t\t\t\t//  RPC  Gets all chart_data:\r\n\t\t\t\t\t\t\tfunction draw_all_chart_data312(obj)\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t// reset datapoints:\r\n\t\t\t\t\t\t\t\t\t\tfor(var i in CJSPLOTdata2_312) CJSPLOTdata2_312[i].data = [];\r\n\t\t\t\t\t\t\t\t\t\t// load new:\r\n\t\t\t\t\t\t\t\t\t\tfor(var i in obj)\r\n\t\t\t\t\t\t\t\t\t\t\t//if(obj[i].time)\r\n\t\t\t\t\t\t\t\t\t\t\t\tfor(var j in CJSPLOTdata2_312)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tif(  obj[i][CJSPLOTdata2_312[j].inpDataKey] )\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t//\tCJSPLOTdata2_312[j].data[i] = {x: obj[i].time, y: obj[i][CJSPLOTdata2_312[j].inpDataKey]};\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif(obj[i].time) \r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif(i == 0)CJSPLOTdata2_312[j].data[i] = {x:obj[i].time, y: obj[i][CJSPLOTdata2_312[j].inpDataKey]};\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tCJSPLOTdata2_312[j].data.push(  {x: obj[i].time, y: obj[i][CJSPLOTdata2_312[j].inpDataKey]}  );\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tchart_2312.update();\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t//  THREE: Update\r\n\t\t\t\t\t\t\t//  RPC  Gets the newest point in chart_data: This function may be combined with the UI updater (uiElementBulkUpdate)\r\n\t\t\t\t\t\t\tfunction append_chart_data312(obj)\r\n\t\t\t\t\t\t\t\t\t{\t\t\r\n\t\t\t\t\t\t\t\t\t\tfor(var j in CJSPLOTdata2_312)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tif(obj[CJSPLOTdata2_312[j].inpDataKey])\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// Update charts which are enabled in the legend:\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tCJSPLOTdata2_312[j].data.push( {x: obj.time, y: obj[CJSPLOTdata2_312[j].inpDataKey]} );\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// Show current values in the legend:\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar val = obj[ CJSPLOTdata2_312[ j ].inpDataKey ];\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar e = CJSPLOTdata2_312[ j ].currentValueIndicatorElement;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar tf = CJSPLOTdata2_312[ j ].toFixed;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif(val === undefined) {e.textContent =  val; continue;}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif(tf && val)\tval = val.toFixed(tf);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif(e && val)  e.textContent =  val;\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// if(deriv > 0) return '▲';\t\t//\t\tif(deriv < 0) return '▼';\t\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tchart_2312.update();\r\n\r\n\r\n\t\t\t\t\t\t\t\t\t\t// Dashboard:\r\n\t\t\t\t\t\t\t\t\t\tDeviceStatus_val312.innerText  = obj.DeviceStatusText;\r\n\t\t\t\t\t\t\t\t\t\tif(typeof updateGauge312 === \"function\") updateGauge312( obj );\r\n\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t// FOUR: Export,  not working\r\n\t\t\t\t\t\t\t// Exports data as csv or png file\r\n\t\t\t\t\t\t\tfunction BtnDataExport312(dataset)\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tconsole.log( 'not implemented')\r\n\r\n\r\n\t\t\t\t\t\t\t\t\tfunction downloadFile(data, fileName) \r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\tvar csvData = data;\r\n\t\t\t\t\t\t\t\t\t\t\tvar blob = new Blob([ csvData ], {\t\ttype : \"application/csv;charset=utf-8;\"\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\tif (window.navigator.msSaveBlob) navigator.msSaveBlob(blob, fileName);\t\t\t//ie\r\n\t\t\t\t\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\t\t\t\t\tvar link = document.createElement(\"a\");\r\n\t\t\t\t\t\t\t\t\t\t\t\tvar csvUrl = URL.createObjectURL(blob);\r\n\t\t\t\t\t\t\t\t\t\t\t\tlink.href = csvUrl;\r\n\t\t\t\t\t\t\t\t\t\t\t\tlink.style = \"visibility:hidden\";\r\n\t\t\t\t\t\t\t\t\t\t\t\tlink.download = fileName;\r\n\t\t\t\t\t\t\t\t\t\t\t\tdocument.body.appendChild(link);\r\n\t\t\t\t\t\t\t\t\t\t\t\tlink.click();\r\n\t\t\t\t\t\t\t\t\t\t\t\tdocument.body.removeChild(link);\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\tfor( var i in dataset) downloadFile(dataset[i], 'file_'+i+'.csv')\r\n\r\n\t\t\t\t\t\t\t\t}\t\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\t\r\n}\r\n</script> \r\n\r\n\n\t\t\t\t\t\t\t\t\t\n<!-- COMMON PROCEDURES  (Upload and reset) -->\n<br>\n\t\t<fieldset><legend>[ Device ]</legend>\n\t\t<span id= \"module_ID312\"></span>\t<label id= \"status_icon312\"></label>\n\t\t<br>\t\n\t\t<br>\n\t\t<button id=\"btn_010312\" onclick= \"MISO_cmd3('on_reset312', {}, ui_button(id));  \"> Device reset</button>\n\t\t<input type=\"file\" id=\"file_input312\" />\n</fieldset>\n\n\n<script>\nfunction readSingleFile(e) \n\t\t{\t\t\t\t\t\t\t\t\t\n\t\t\tvar file = e.target.files[0];\n\t\t\tif (!file) return;\n\t\t\tvar reader = new FileReader();\n\t\t\treader.onload = function(e) \n\t\t\t\t{\n\t\t\t\t\t\tvar contents = e.target.result;\n\t\t\t\t\t\tvar fName = file_input312.value.replace(/.*[\\/\\\\]/, '');\n\t\t\t\t\t\tvar code = this.result;\t\n\t\t\t\t\t\tif( !fName ) return modal_alert('cannot load file');\n\t\t\t\t\t\tif( !code ) return modal_alert('cannot load file');\n\t\t\t\t\t\tmodal_confirm('Save file \"' + fName + '\" to FLASH?', function(r)\n\t\t\t\t\t\t\t\t{\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\tif(r) MISO_cmd3('role_update312',  {role_file_name: fName, role_file_data: code},  function(o)\n\t\t\t\t\t\t\t\t\t\t{ \n\t\t\t\t\t\t\t\t\t\t\tif( o.status == true)\n\t\t\t\t\t\t\t\t\t\t\t\tmodal_alert ( 'Upload successful, reset the device to apply changes' );\n\t\t\t\t\t\t\t\t\t\t\t\telse if(o.msg)modal_error( o.msg ); \n\t\t\t\t\t\t\t\t\t\t\tui_button('file_input312', o);\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t}); \n\t\t\t\t\t\t\t\t\telse  document.getElementById('file_input312').value = \"\";\n\t\t\t\t\t\t\t\t});\n\t\t\t\t };\n\t\t\t reader.readAsText(file);\n\t\t}\t\t\t\t\t \t\n\n\t\tdocument.getElementById('file_input312') .addEventListener('change', readSingleFile, false);\t\t\t \n</script>\n\n<script>\t\tfunction setstatus312(status){}\t\t\t\t\t</script>\n\n","htmlShort":"\r\n\t<script src=\"/lib/justgage/justgage.js\"></script>\r\n\t<script src=\"/lib/justgage/raphael-2.1.4.min.js\"></script>\r\n    <style>\r\n    \t.gauge {      width: 130px;      height: 100px;    } \r\n\t</style>\r\n\t\r\n\t\r\n\t<table>\t\r\n\t \t<tr align=\"center\">\t\t\t<td> <div id=\"g1\" class=\"gauge\"></div> </td>\t\t<td> <div id=\"g2\" class=\"gauge\"></div> </td>\t\t\t\t<td> <div id=\"g3\" class=\"gauge\"></div> </td>\t\t\t\t<td> <div id=\"g4\" class=\"gauge\"></div> </td>\t\t\t\t</tr>\r\n\t\t<!--\t<tr align=\"center\">\t\t\t<td> Temperature </td>\t\t<td> Relative humidity </td>\t\t\t\t<td> CO2 concentration </td>\t\t\t\t<td> Dust pollution </td>\t\t\t\t</tr>\t-->\r\n\t</table>\r\n\t\t\r\n    <script>       \r\n\t\t\tvar g1 = new JustGage({\r\n\t\t\t\tid: 'g1',\r\n\t\t\t\tvalue: 50,        min: -10,     max: 50,        symbol: 'C',\r\n\t\t\t\tpointer: true,\r\n\t\t\t\tgaugeWidthScale: 0.6,\r\n\t\t\t\t//customSectors: [{ color: '#ff0000',          lo: 50,          hi: 100    }, {          color: '#00ff00',          lo: 0,          hi: 50        }],\r\n\t\t\t\tcounter: true,\r\n\t\t\t\ttitle: \"Temperature\",\r\n         \t\t//label: \"C\"\r\n\t\t\t});\r\n\r\n\t\t\tvar g2 = new JustGage({\r\n\t\t\t\tid: 'g2',\r\n\t\t\t\tvalue: 100,        min: 0,        max: 100,        symbol: '%',\r\n\t\t\t\tpointer: true,\r\n\t\t\t//\tpointerOptions: {          toplength: -15,          bottomlength: 10,          bottomwidth: 12,          color: '#1e8e93',          stroke: '#ffffff',          stroke_width: 3,          stroke_linecap: 'round'        },\r\n\t\t\t//\tcustomSectors: [{ color: '#ff0000',          lo: 50,          hi: 100    }, {          color: '#00ff00',          lo: 0,          hi: 50        }],\r\n\t\t\t\tgaugeWidthScale: 0.6,\r\n\t\t\t\tcounter: true,\r\n\t\t\t\ttitle: \"Relative humidity\",\r\n         \t\t//label: \"%\"\r\n\t\t\t});\r\n\r\n\t\t\tvar g3 = new JustGage({\r\n\t\t\t\tid: 'g3',\r\n\t\t\t\tvalue: 5000,        min: 400,        max: 5000,        symbol: '',\r\n\t\t\t\t//donut: true,\r\n\t\t\t\tpointer: true,\r\n\t\t\t\tgaugeWidthScale: 0.4,\r\n\t\t\t\t//pointerOptions: {          toplength: 10,          bottomlength: 10,          bottomwidth: 8,          color: '#000'        },\r\n\t\t\t\t//customSectors: [{          color: \"#ff0000\",          lo: 50,          hi: 100        }, {          color: \"#00ff00\",          lo: 0,          hi: 50        }],\r\n\t\t\t\t//pointerOptions: {          toplength: 8,          bottomlength: -20,          bottomwidth: 6,          color: '#aae53'        }, \r\n\t\t\t\tcounter: true,\r\n\t\t\t\ttitle: \"CO2 concentration \",\r\n         \t\tlabel: \"PPM\"\r\n\t\t\t});\r\n\r\n\t\t\tvar g4 = new JustGage({\r\n\t\t\t\tid: 'g4',\r\n\t\t\t\tvalue: 1000,        min: 0,        max: 1000,        symbol: '',\r\n\t\t\t\tpointer: true,\r\n\t\t\t\t//pointerOptions: {          toplength: 8,          bottomlength: -20,          bottomwidth: 6,          color: '#8e8e93'        },      \r\n\t\t\t\tgaugeWidthScale: 0.3,\r\n\t\t\t\tcounter: true,\r\n\t\t\t\ttitle: \"Dust pollution \",\r\n         \t\tlabel: \"um/m3\"\r\n\t\t\t});\r\n\r\n\t\t\r\n\t\t\tfunction updateGauge312( obj )\r\n\t\t\t\t\t{\r\n \t\t\t\t\t      if( !isNaN( obj.h ))\t\t\t\t\t\tg1.refresh( obj.t );\r\n \t\t\t\t\t      if( !isNaN( obj.h ))\t\t\t\t\t \tg2.refresh( obj.h );\r\n \t\t\t\t\t      if( !isNaN( obj.co2 ))\t\t\t\t  g3.refresh( obj.co2 );\r\n \t\t\t\t\t      if( !isNaN( obj.dust_all_pm ))\tg4.refresh( obj.dust_all_pm );\r\n\t\t\t\t\t}\r\n\t\r\n\t</script>\r\n","remoteConnected":false,"mod_rnd":312,"pluginEnabled":true,"LCONF":{"configName":"AirMeter"}},{"module_name":"Humidif. SW","local_id":"a55dfb","sb":{"domain":null,"_events":{"MISO_getAdminGUIupdate":[null,null,null],"on_log_test_BTN568":[null,null],"on_log_test_BTN367":[null,null]},"_eventsCount":33,"_maxListeners":0,"ackRx":{},"SBCONF":{"loaded":false,"serverremotedataserverip":"0.0.0.0","maxCUsers":10,"multiple_sns":true,"serverremotedataInport":60},"wsock_array":[],"all_infrastructure_IDs":{}},"html":"\n\t<table cellspacing=\"1\" >\n\n\t\t<!-- Status -->\n\t\t<tr><td>\t\t\n\t\t\t\t\t<label style=\"color:#000000\">Power status:</label>&nbsp;<label   id='label01_power_on_time339' ></label>\t\n\t\t</td></tr>\n\n\t\t<tr><td>\n\t\t\t\t\t<label style=\"color:#000000\">Energy last:</label>&nbsp;<label   id='label02_lastOn339' ></label>\t\t\t\t\n\t\t</td></tr>\n\n\t\t<tr><td>\n\t\t\t\t\t<label style=\"color:#000000\">Energy total:</label>\n\t\t\t\t\t<label  id=\"label03_total339\" > </label> &nbsp; &nbsp; &nbsp; \t\n\t\t\t\t\t<button class=\"s_ctrl_btn_c\"  id=\"btn_0001_reset_powerCount339\" onclick= \"MISO_cmd3('on_pwr_count_reset339', {}, ui_button(id)); \">Reset</button>\n\t\t</td></tr>\n\n\t\t<!-- Controls -->\n\t\t<tr><td>\t\t\n\t\t\t\t<button  class=\"s_ctrl_btn_c\" id=\"bt1339\"\tonclick= \"MISO_cmd3( 'set_SW339', {value:1}, ui_button(id));\"> ON </button>\n\t\t\t\t&nbsp;\n\t\t\t\t<button  class=\"s_ctrl_btn_c\" id=\"bt2339\"\tonclick= \"MISO_cmd3( 'set_SW339', {value:0}, ui_button(id));\"> OFF </button>\n\t\t\t\t&nbsp;\n\t\t\t\t<button  class=\"s_ctrl_btn_c\" id=\"bt3339\"\tonclick= \"MISO_cmd3( 'toggle_SW339', null, ui_button(id));\"> Toggle </button>\n\t\t\t\t\n\t\t\t\t<!--<br><button  class=\"s_ctrl_btn_c\" id=\"bt4339\"\tonclick= \"MISO_cmd3( 'sleep_SW339', {value:10}, ui_button(id) ); \"> SleepTimer (10 sec)</button> \n\t\t\t\t&nbsp;&nbsp;&nbsp;\n\t\t\t\tSleep timer <select  onchange=\"MISO_cmd3( 'sleep_SW339', {value:value},  null)\">\n\t\t\t\t\t\t\t\t<option value=\"\"></option>\t\t<option value=\"10\">10 sec</option>\t\t<option value=\"30\">30 sec</option> \t\t<option value=\"300\">5 min</option> \n\t\t\t\t\t\t\t\t</select>\t\t\t\t-->\n\t\t</td></tr>\t\t\n\t\t\n\t\t<!-- Configuration -->\n\t\t<tr><td>\t\t\t\t\t\t\n\t\t\t\t\t<label style=\"color:#000000\">Average load power, Watt:</label>\n\t\t\t\t\t<input \n\t\t\t\t\t\ttype=\"number\"  min=\"1\" max=\"10000\"    \n\t\t\t\t\t\tid=\"text01_load_pwr339\" \n\t\t\t\t\t\tonchange=\" \tMISO_cmd3('on_mod_ctrl_load_power339', value , ui_button(id));\"\n\t\t\t\t\t>\t\t\t\t\t\n\t\t</td></tr>\n\t\t<tr><td>\t\t\t\t\t\t\n\t\t\t\t\t<label style=\"color:#000000\">Maximal ON time, Seconds :</label>\n\t\t\t\t\t<input \n\t\t\t\t\t\ttype=\"number\"  min=\"1\" max=\"9999999999\"    \n\t\t\t\t\t\tid=\"text02_on_time_max339\" \n\t\t\t\t\t\tonchange=\" \tMISO_cmd3('on_set_power_on_time_max339', value , ui_button(id));\"\n\t\t\t\t\t>\t\t\t\t\t\n\t\t</td></tr>\n\n\t</table>\t \n\n\n \t<script>\n\t//\tlabel01_power_on_time339.numValue = -1; \n \n\n\t\t// on page loaded: \n\t\t$(function() {\n\n\t\t\t\t\n\n\t\t\t\tfunction tInterval339()\n\t\t\t\t\t\t{\t\t\t\t\t\n\n\t\t\t\t\t\t\t\tvar powerOnTime = Number( label01_power_on_time339.numValue );\n\t\t\t\t\t\t\t\tvar powerOnWattsHLast= Number( label02_lastOn339.numValue );\n\t\t\t\t\t\t\t\tvar powerOnWattsTotal = Number( label03_total339.numValue );\n\t\t\t\t\t\t\t\tvar powerConsumption = Number( text01_load_pwr339.value );\n\n\n\t\tif(typeof   label01_power_on_time339.dtCount   == 'undefined' ) {\tlabel01_power_on_time339.dtCount  = 0;\t\t\tlabel03_total339.textContent = PowerSpan( \tpowerOnWattsTotal );\t\t\t}\n\n\n\t\t\t\t\t\t\t\tvar dTime = label01_power_on_time339.dtCount;\n\n\n\t\t\t\t\t\t\t\tlabel11_power_on_time339.textContent    = label01_power_on_time339.textContent ;\n\n\n\t\t\t\t\t\t\t\t// If power off:\n\t\t\t\t\t\t\t\tif( powerOnTime == -1 ) {\t\t\t\t\tlabel01_power_on_time339.textContent  = ' OFF ';\t\tdTime=0;\t\t\tlabel02_lastOn339.textContent  = ''; \t\t\t\t }\n\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t// Time count:\n\t\t\t\t\t\t\t\t\t//dTime+=0.4;\t\t// 0.4 => 400 ms\n\t\t\t\t\t\t\t\t\tdTime+=1;\t\t// 0.4 => 400 ms\n\n\t\n\t\t\t\t\t\t\t\t\t// Energy count:\n\t\t\t\t\t\t\t\t\t// var pw = (powerOnTime + dTime ) * powerConsumption / (60*60);\n\t\t\t\t\t\t\t\t\tvar pw =  ( powerOnTime + dTime )  * (powerConsumption / (60*60)/1);\t\t\t\n\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\tlabel01_power_on_time339.textContent = '  ON ' + TimeSpan( powerOnTime + dTime );\t\t\t\t\n\t\t\t\n\t\t\t\t\t\t\t\t\tlabel02_lastOn339.textContent  =  PowerSpan( powerOnWattsHLast + pw );\n\t\t\t\t\t\t\t\t\tlabel03_total339.textContent = PowerSpan( powerOnWattsTotal +pw);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\n\n\t\t\t\t\t\t\t\tlabel01_power_on_time339.dtCount = dTime;\t\n\t\t\t\t\t\t\t}\n\n\n\n\t\t\t\t// setInterval(tInterval339,  500);\n\t\t\t \tsetInterval(tInterval339, 1000);\n\n\t\t\t});\n\n\t\t\t\t\t\t\n\t\t\tfunction TimeSpan(Sec) \n\t\t\t{\t \n\t\t\t\t\tSec = Math.floor( Sec );\n\t\t\t\t\tvar hours = parseInt( Sec / 3600 ) % 24;\n\t\t\t\t\tvar minutes = parseInt( Sec / 60 ) % 60;\n\t\t\t\t\tvar seconds = Sec % 60;\t\t\t\t\t \n\t\t\t\t\t if( Sec < 60 ) return seconds + ' s';\n\t\t\t\t\t if( Sec < 60*60 ) return minutes + ' m : ' + seconds + ' s';\n\t\t\t\t\t if( Sec < 60*60*60 ) return hours + ' h : ' + minutes + ' m';\n\t\t\t\t\t// if( Sec < 60*60*60*24 ) return hours + ' h : ' + minutes + ' m : ' + seconds + ' s';\n\t\t\t\t\treturn hours + ' h : ' + minutes + ' m';\n\t\t\t}\t\t\n\t\t\t\t\t\t\t\n\t\t\tfunction PowerSpan(wattsh) \n\t\t\t{\t \t\t\t\t \n\t\t\t\t\twattsh = Math.floor( wattsh );\n\t\t\t\t\t if( wattsh < 1000 ) return wattsh + ' Wt/h';\n\t\t\t\t\t else return wattsh/100 + ' kWt/hr';\t \n\t\t\t}\t\t\n\n\t</script>\t\t\n\n\t\t\n \n\t\t\t\t\t\t\t\t\t\n<!-- COMMON PROCEDURES  (Upload and reset) -->\n<br>\n\t\t<fieldset><legend>[ Device ]</legend>\n\t\t<span id= \"module_ID339\"></span>\t<label id= \"status_icon339\"></label>\n\t\t<br>\t\n\t\t<br>\n\t\t<button id=\"btn_010339\" onclick= \"MISO_cmd3('on_reset339', {}, ui_button(id));  \"> Device reset</button>\n\t\t<input type=\"file\" id=\"file_input339\" />\n</fieldset>\n\n\n<script>\nfunction readSingleFile(e) \n\t\t{\t\t\t\t\t\t\t\t\t\n\t\t\tvar file = e.target.files[0];\n\t\t\tif (!file) return;\n\t\t\tvar reader = new FileReader();\n\t\t\treader.onload = function(e) \n\t\t\t\t{\n\t\t\t\t\t\tvar contents = e.target.result;\n\t\t\t\t\t\tvar fName = file_input339.value.replace(/.*[\\/\\\\]/, '');\n\t\t\t\t\t\tvar code = this.result;\t\n\t\t\t\t\t\tif( !fName ) return modal_alert('cannot load file');\n\t\t\t\t\t\tif( !code ) return modal_alert('cannot load file');\n\t\t\t\t\t\tmodal_confirm('Save file \"' + fName + '\" to FLASH?', function(r)\n\t\t\t\t\t\t\t\t{\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\tif(r) MISO_cmd3('role_update339',  {role_file_name: fName, role_file_data: code},  function(o)\n\t\t\t\t\t\t\t\t\t\t{ \n\t\t\t\t\t\t\t\t\t\t\tif( o.status == true)\n\t\t\t\t\t\t\t\t\t\t\t\tmodal_alert ( 'Upload successful, reset the device to apply changes' );\n\t\t\t\t\t\t\t\t\t\t\t\telse if(o.msg)modal_error( o.msg ); \n\t\t\t\t\t\t\t\t\t\t\tui_button('file_input339', o);\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t}); \n\t\t\t\t\t\t\t\t\telse  document.getElementById('file_input339').value = \"\";\n\t\t\t\t\t\t\t\t});\n\t\t\t\t };\n\t\t\t reader.readAsText(file);\n\t\t}\t\t\t\t\t \t\n\n\t\tdocument.getElementById('file_input339') .addEventListener('change', readSingleFile, false);\t\t\t \n</script>\n\n<script>\t\tfunction setstatus339(status){}\t\t\t\t\t</script>\n\n","htmlShort":"\n\t<table>\t\n\t <tr>\t\t\t\n\t \t\t<td> <button id=\"bts1339\" class=\"s_ctrl_btn_c\"\tonclick= \"MISO_cmd3( 'set_SW339', {value:1}, ui_button(id));\"> ON </button> </td>\n\t\t\t<td> <button id=\"bts2339\" class=\"s_ctrl_btn_c\"\tonclick= \"MISO_cmd3( 'set_SW339', {value:0}, ui_button(id));\"> OFF </button> </td>\n\t\t\t<td> <button id=\"bts3339\" class=\"s_ctrl_btn_c\"\tonclick= \"MISO_cmd3( 'toggle_SW339', null, ui_button(id));\"> Toggle </button> </td>\n\t\t\t<td> <label   id='label11_power_on_time339' ></label> </td>\n\t\t</tr>\t\n\t</table>\n\t\t\t\n ","remoteConnected":false,"mod_rnd":339,"pluginEnabled":true,"LCONF":{"configName":"OneSwitch"}}]